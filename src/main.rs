#[cfg(windows)]
extern crate winapi;
use std::io::Error;
use std::str::from_utf8;
mod lib;
use lib::{create_file, write_file};
use std::ffi::OsStr;
use std::iter::once;
use std::os::windows::ffi::OsStrExt;

fn main() {
    let file_handler =
        create_file("C:/Users/chuon/OneDrive/Desktop/testing_malware/yeet.txt").unwrap();
    let wide: Vec<u16> = OsStr::new("Hello, I am a malware!!")
        .encode_wide()
        .chain(once(0))
        .collect();
    let wide = String::from("Hello, I am a malware!!").into_bytes();
    let byte_written = write_file(file_handler, wide).unwrap();
    println!("We have written {} bytes", byte_written);
}
